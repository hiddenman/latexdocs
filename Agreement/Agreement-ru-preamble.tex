\documentclass[pdftex,a4paper,10pt,oneside]{scrartcl}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=3cm,bindingoffset=0cm]{geometry}
\usepackage{cmap} % чтобы работал поиск по PDF
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}

% our vars
\def\ipxpname{IPXP Europe s.r.o.}
\def\ipxpaddress{Bubenec, Ceskoslovenske armady 371/11, PSC 160 00, Prague 6, Czech Republic}


% do not enlarge space after punctuation marks
\frenchspacing
% make bold font better
\renewcommand{\bfdefault}{b}
% we can hyphen and left two symbols in Russian
\righthyphenmin=2

% use cm-super
%\renewcommand{\rmdefault}{cmr}
%\renewcommand{\sfdefault}{cmss}
%\renewcommand{\ttdefault}{cmtt}

% use pscyr
\usepackage{pscyr}
%\renewcommand{\rmdefault}{fjn}
%\renewcommand{\sfdefault}{fma}
%\renewcommand{\ttdefault}{fcr}
\renewcommand{\rmdefault}{ftm}
\renewcommand{\sfdefault}{far}
\renewcommand{\ttdefault}{fcr}
% font for PDF forms
%\renewcommand*{\familydefault}{cmr}
%\renewcommand*{\familydefault}{fjn}
\renewcommand*{\familydefault}{ftm}


% titlesec etc.
\usepackage[bf,small,compact]{titlesec}
\usepackage{indentfirst} % first paragraph indent

% format of section: X.
\makeatletter
\renewcommand*{\@seccntformat}[1]{%
   \csname the#1\endcsname.\;
}
% dot at the TOC
\renewcommand\numberline[1]{\hb@xt@\@tempdima{#1.\hfil}}
\makeatother


\lccode`\-=`\-
\defaulthyphenchar=127


\usepackage[english,russian]{babel}
% for date formatting
\usepackage{datetime}
\renewcommand{\timeseparator}{:}
\renewcommand{\dateseparator}{.}
% end datetime
\usepackage{url} % urling
\usepackage{fancyhdr} % управление колонтитулами
\usepackage{amssymb} % математические символы. пригодятся в пакете ntheorem
\usepackage{amsmath} % математические символы. пригодятся в пакете ntheorem
\usepackage[amsthm,amsmath,thmmarks,hyperref]{ntheorem} % поддержка точек после номера теорем
\usepackage[warn]{mathtext}
\usepackage{srcltx}
\usepackage{textcomp}
\usepackage{wrapfig}
\usepackage{tabularx}
\usepackage{afterpage}
\usepackage{ccaption} % подписи к рисункам с точкой и пр.
\usepackage{color}
\usepackage{makeidx}
\usepackage{xspace}
\usepackage{wasysym}
\usepackage{enumerate}
\usepackage{enumitem}    % Enhancing the list environments
\usepackage{underscore}
\usepackage{bigstrut}

\usepackage{calc}

\usepackage[pdftex]{graphicx}
\usepackage{epstopdf}
\pdfcompresslevel=9 % сжимать PDF


\newcommand{\bs}{\symbol{'134}}
\newcommand{\grad}{\ensuremath{{}^{\circ}}\xspace}

\deffootnote[2.5em]{1.5em}{1em}{\textsuperscript{\thefootnotemark}}



\addto\captionsrussian{\def\contentsname{\textbf{Оглавление.}}}
\addto\captionsrussian{\def\refname{\textbf{Литература.}}}
                        % Наклонные русские буквы в формулах при установленном
                        % пакете pscyr
                        % подпись к рисунку в виде цифры с точкой (и пробелом!),
                        % а не сдвоеточием требует пакета ccaption

\captiondelim{. }
                        % Добавить это перед begin{thebibliography} для
                        % нумерации списка литературы в виде цифры с точкой
\makeatletter
\renewcommand{\@biblabel}[1]{#1.}
\makeatother
                        % определение теорем, необходим пакет ntheorem
\newtheorem{theo}{Теорема}
                        % Конец преамбулы

% enumerate style
\renewcommand\theenumi{\arabic{enumi}}
\renewcommand\labelenumi{\theenumi.}
\renewcommand\theenumii{\arabic{enumii}}
\renewcommand\labelenumii{\theenumi.\theenumii.}
\renewcommand\theenumiii{\arabic{enumiii}}
\renewcommand\labelenumiii{\labelenumii\theenumiii.}
\renewcommand\theenumiv{\arabic{enumiv}}
\renewcommand\labelenumiv{\labelenumiii\theenumiv.}

\makeatletter \renewcommand\p@enumii{\theenumi.} \makeatother

% some variables for better formatting
\clubpenalty=1000
\widowpenalty=1000
\tolerance=300

% bullets
\renewcommand{\labelitemi}{$\bullet$}
\renewcommand{\labelitemii}{$\cdot$}
\renewcommand{\labelitemiii}{$\diamond$}
\renewcommand{\labelitemiv}{$\ast$}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% fancyhdr
\usepackage{fancyhdr}
\pagestyle{fancy}

% for page number
\usepackage{lastpage}

\newsavebox{\ipxplogo}
\savebox{\ipxplogo}{\noindent\includegraphics[keepaspectratio]{logo-ipxp}}

\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

\chead{\thepage}
%\chead{\thepage\ of \pageref{LastPage}}
\rhead{\textbf{Договор}}

\cfoot{\usebox{\ipxplogo}}
\lfoot{\parbox{5.5cm}{\rule{5.5cm}{0.4pt}\\ \TextField[name=ipxpname,charsize=10pt,width=5.5cm,height=1em,align=1,borderwidth=0,bordercolor={1 1 1},value=\ipxpname,readonly=true]{}}}
\rfoot{\parbox{5.5cm}{\rule{5.5cm}{0.4pt}\\ \TextField[name=clntname,charsize=10pt,width=5.5cm,height=1em,align=1,borderwidth=0,bordercolor={1 1 1}]{}}}

% for the first page
\fancypagestyle{agreement-noheader}{%
\fancyhf{} % clear all header and footer fields
\lfoot{\parbox{5.5cm}{\rule{5.5cm}{0.4pt}\\ \TextField[name=ipxpname,charsize=10pt,width=5.5cm,height=1em,align=1,borderwidth=0,bordercolor={1 1 1},value=\ipxpname,readonly=true]{}}}
\cfoot{\usebox{\ipxplogo}}
\rfoot{\parbox{5.5cm}{\rule{5.5cm}{0.4pt}\\ \TextField[name=clntname,charsize=10pt,width=5.5cm,height=1em,align=1,borderwidth=0,bordercolor={1 1 1}]{}}}
\renewcommand{\headrulewidth}{0.0pt}
}

\fancypagestyle{agreement-nofooter}{%
\fancyhf{} % clear all header and footer fields
\cfoot{\usebox{\ipxplogo}}
}

% for the first page
\fancypagestyle{appendix}{%
\fancyhf{} % clear all header and footer fields
\chead{\thepage}
%\chead{\thepage\ of \pageref{LastPage}}
\rhead{\textbf{Приложение А}}
\lfoot{}
\lfoot{\parbox{5.5cm}{\rule{5.5cm}{0.4pt}\\ \TextField[name=ipxpname,charsize=10pt,width=5.5cm,height=1em,align=1,borderwidth=0,bordercolor={1 1 1},value=\ipxpname,readonly=true]{}}}
\cfoot{\usebox{\ipxplogo}}
\rfoot{\parbox{5.5cm}{\rule{5.5cm}{0.4pt}\\ \TextField[name=clntname,charsize=10pt,width=5.5cm,height=1em,align=1,borderwidth=0,bordercolor={1 1 1}]{}}}
}

% for the first page
\fancypagestyle{appendix-noheader}{%
\fancyhf{} % clear all header and footer fields
\renewcommand{\headrulewidth}{0.0pt}
\lfoot{\parbox{5.5cm}{\rule{5.5cm}{0.4pt}\\ \TextField[name=ipxpname,charsize=10pt,width=5.5cm,height=1em,align=1,borderwidth=0,bordercolor={1 1 1},value=\ipxpname,readonly=true]{}}}
\cfoot{\usebox{\ipxplogo}}
\rfoot{\parbox{5.5cm}{\rule{5.5cm}{0.4pt}\\ \TextField[name=clntname,charsize=10pt,width=5.5cm,height=1em,align=1,borderwidth=0,bordercolor={1 1 1}]{}}}
}

\fancypagestyle{appendix-nofooter}{%
\fancyhf{} % clear all header and footer fields
\cfoot{\usebox{\ipxplogo}}
}

\thispagestyle{agreement-noheader}
% end fancyhdr
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



% special macro for underscores
%\def\rp{\raisebox{-1pt}{\rule{1cm}{.4pt}}\hspace{0pt}}
\def\rp{\raisebox{0pt}{\rule{0.5cm}{.4pt}}\penalty100}

\usepackage[pdftex,a4paper,final,bookmarks=true,bookmarksopen,bookmarksnumbered,plainpages=false,colorlinks=false, unicode,pdfpagelabels, plainpages=false, pdfstartview=FitH]{hyperref}
% JavaScript
\usepackage[pdftex]{insdljs}
\hypersetup{
 pdftitle={Договор о телекоммуникационных услугах,Версия 1.0, \pdfdate},
 pdfauthor=IPXP Europe s.r.o.,
 pdfsubject={Договор о телекоммуникационных услугах},
 pdfkeywords={соглашение, договор, приложение}
}


\begin{insDLJS}[docOpen]{agreementru}{JavaScript}
function docOpen()
{
   this.getField("contractdate").textFont = font.Times;
   this.getField("contractdate").userName = "Enter contract date";

   this.getField("contractnum").textFont = font.Times;
   this.getField("contractnum").userName = "Enter contract number";

   this.getField("ipxpname").textFont = font.TimesB;
   this.getField("ipxpname").userName = "Enter company name";

   this.getField("ipxpmanager").textFont = font.TimesI;
   this.getField("ipxpmanager").userName = "Enter manager name and e-mail";
   
   this.getField("clntname").textFont = font.TimesB;
   this.getField("clntname").userName = "Enter company name";
   
   this.getField("clntdirname").textFont = font.TimesI;
   this.getField("clntdirname").userName = "Enter director name";

   this.getField("clntcountry").textFont = font.TimesI;
   this.getField("clntcountry").userName = "Enter country name";

   this.getField("clntregnum").textFont = font.TimesI;
   this.getField("clntregnum").userName = "Enter registration number";

   this.getField("clntlegaladdr").textFont = font.TimesI;
   this.getField("clntlegaladdr").userName = "Enter legal address";

   this.getField("clntlegaladdrnext").textFont = font.TimesI;
   this.getField("clntlegaladdrnext").userName = "Enter legal address";

   this.getField("clntcorraddr").textFont = font.TimesI;
   this.getField("clntcorraddr").userName = "Enter address for correspondence";

   this.getField("clntcorraddrnext").textFont = font.TimesI;
   this.getField("clntcorraddrnext").userName = "Enter address for correspondence";

   this.getField("clntmanager").textFont = font.TimesI;
   this.getField("clntmanager").userName = "Enter manager name and e-mail";

   this.getField("clntmanagernext").textFont = font.TimesI;
   this.getField("clntmanagernext").userName = "Enter manager name and e-mail";
   
   this.getField("clntphone").textFont = font.TimesI;
   this.getField("clntphone").userName = "Enter phone number in E.164 format";

   this.getField("clntphonenext").textFont = font.TimesI;
   this.getField("clntphonenext").userName = "Enter phone number in E.164 format";

   this.getField("clntfax").textFont = font.TimesI;
   this.getField("clntfax").userName = "Enter fax number in E.164 format";

   this.getField("clntfaxnext").textFont = font.TimesI;
   this.getField("clntfaxnext").userName = "Enter fax number in E.164 format";
   
   this.getField("clntattorneyprintname").textFont = font.TimesI;
   this.getField("clntattorneyprintname").userName = "Enter attorney print name";

   this.getField("clntattorneyposition").textFont = font.TimesI;
   this.getField("clntattorneyposition").userName = "Enter attorney position";

   this.getField("clntgeneralemail").textFont = font.TimesB;
   this.getField("clntgeneralemail").userName = "Enter email for general support";

   this.getField("clntgeneralemailnext").textFont = font.TimesB;
   this.getField("clntgeneralemailnext").userName = "Enter email for general support";

   this.getField("clntnocemail").textFont = font.TimesB;
   this.getField("clntnocemail").userName = "Enter email for technical support";

   this.getField("clntnocemailnext").textFont = font.TimesB;
   this.getField("clntnocemailnext").userName = "Enter email for technical support";

   this.getField("clntqaemail").textFont = font.TimesB;
   this.getField("clntqaemail").userName = "Enter email for quality assurance";

   this.getField("clntqaemailnext").textFont = font.TimesB;
   this.getField("clntqaemailnext").userName = "Enter email for quality assurance";
   
   this.getField("clntratesemail").textFont = font.TimesB;
   this.getField("clntratesemail").userName = "Enter email for rates notifications";

   this.getField("clntratesemailnext").textFont = font.TimesB;
   this.getField("clntratesemailnext").userName = "Enter email for rates notifications";

   this.getField("clntagreementsemail").textFont = font.TimesB;
   this.getField("clntagreementsemail").userName = "Enter email for agreements and appendices";

   this.getField("clntagreementsemailnext").textFont = font.TimesB;
   this.getField("clntagreementsemailnext").userName = "Enter email for agreements and appendices";

   this.getField("clntinvoiceemail").textFont = font.TimesB;
   this.getField("clntinvoiceemail").userName = "Enter email for invoices";

   this.getField("clntinvoiceemailnext").textFont = font.TimesB;
   this.getField("clntinvoiceemailnext").userName = "Enter email for invoices";
   
   this.getField("clntbillingemail").textFont = font.TimesB;
   this.getField("clntbillingemail").userName = "Enter email for disputes,CDRs";

   this.getField("clntbillingemailnext").textFont = font.TimesB;
   this.getField("clntbillingemailnext").userName = "Enter email for disputes,CDRs";

   this.getField("clntfinanceemail").textFont = font.TimesB;
   this.getField("clntfinanceemail").userName = "Enter email for other financial questions";

   this.getField("clntfinanceemailnext").textFont = font.TimesB;
   this.getField("clntfinanceemailnext").userName = "Enter email for other financial questions";

   this.getField("clntbeneficiarname").textFont = font.TimesI;
   this.getField("clntbeneficiarname").userName = "Enter beneficiar name";

   this.getField("clntbeneficiarnamenext").textFont = font.TimesI;
   this.getField("clntbeneficiarnamenext").userName = "Enter beneficiar name";

   this.getField("clntbeneficiarbank").textFont = font.TimesI;
   this.getField("clntbeneficiarbank").userName = "Enter beneficiar's bank";

   this.getField("clntbeneficiarbanknext").textFont = font.TimesI;
   this.getField("clntbeneficiarbanknext").userName = "Enter beneficiar's bank";

   this.getField("clntbeneficiarbankswift").textFont = font.TimesI;
   this.getField("clntbeneficiarbankswift").userName = "Enter beneficiar's bank S.W.I.F.T. code";

   this.getField("clntbeneficiarbankswiftnext").textFont = font.TimesI;
   this.getField("clntbeneficiarbankswiftnext").userName = "Enter beneficiar's bank S.W.I.F.T. code";

   this.getField("clntbeneficiarbankiban").textFont = font.TimesI;
   this.getField("clntbeneficiarbankiban").userName = "Enter beneficiar's IBAN";

   this.getField("clntbeneficiarbankibannext").textFont = font.TimesI;
   this.getField("clntbeneficiarbankibannext").userName = "Enter beneficiar's IBAN";

   this.getField("clntcorrespondentbank").textFont = font.TimesI;
   this.getField("clntcorrespondentbank").userName = "Enter correspondent bank";

   this.getField("clntcorrespondentbanknext").textFont = font.TimesI;
   this.getField("clntcorrespondentbanknext").userName = "Enter correspondent bank";

   this.getField("clntcorrespondentbankswift").textFont = font.TimesI;
   this.getField("clntcorrespondentbankswift").userName = "Enter correspondent bank S.W.I.F.T. code";

   this.getField("clntcorrespondentbankswiftnext").textFont = font.TimesI;
   this.getField("clntcorrespondentbankswiftnext").userName = "Enter correspondent bank S.W.I.F.T. code";

   this.getField("clntcorrespondentbankaccount").textFont = font.TimesI;
   this.getField("clntcorrespondentbankaccount").userName = "Enter correspondent bank account number";

   this.getField("clntcorrespondentbankaccountnext").textFont = font.TimesI;
   this.getField("clntcorrespondentbankaccountnext").userName = "Enter correspondent bank account number";
   
   this.getField("clntgmt").textFont = font.TimesB;
   this.getField("clntgmt").userName = "Enter GMT offsets";

   this.getField("clntgmtsummer").textFont = font.TimesB;
   this.getField("clntgmtsummer").userName = "Enter GMT offset";

}
\end{insDLJS}
\OpenAction{/S /JavaScript /JS (docOpen();)}

\def\tfnextlinewidth{145mm}
\def\tfnextlinewidthtwo{139mm}
\def\tfnextlinewidththree{167mm}
\newlength{\fieldlength}
\newcommand{\MyTextField}[2]{
  \setlength{\fieldlength}{\linewidth-\widthof{#1}-3mm}
  #1 #2
}
\newcommand{\MyTextFieldTwo}[2]{
  \setlength{\fieldlength}{\linewidth-\widthof{#1}-2mm}
  #1 #2
}
